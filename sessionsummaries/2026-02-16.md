# Session Summary - 2026-02-16

## What Was Built

BurnoutTracker AI Animated Desktop Buddy - a full local desktop application for tracking work sessions, predicting burnout, and providing break recommendations through an animated desktop companion.

### Architecture


- **PySide6/Qt6** for desktop UI (dark Catppuccin Mocha theme)
- **SQLite** for local storage (WAL mode, foreign keys)
- **scikit-learn** for ML predictions (linear regression with EMA fallback)
- **Matplotlib** for charts (swappable with MATLAB - see `docs/MATLAB_SWAP_GUIDE.md`)
- **pygame** for programmatic audio (sine wave synthesis)

### Core Files Created

| Layer | Files |
|-------|-------|
| Data | `src/data/database.py`, `models.py`, `repository.py` |
| Services | `src/services/session_service.py`, `tracking_service.py`, `break_research.py` |
| ML | `src/ml/predictor.py` |
| Animation | `src/animation/sprite_engine.py`, `sprite_generator.py`, `buddy_widget.py`, `sound_manager.py` |
| UI | `src/ui/main_window.py`, `dashboard_widget.py`, `settings_widget.py`, `plot_backend.py`, `styles.py` |
| Config | `config/animation.json` |
| Entry | `main.py` |
| Tests | `tests/test_data.py`, `test_services.py`, `test_ml.py` (35 tests, all passing) |
| Scripts | `scripts/seed_data.py` |
| Docs | `INTERVIEW_NOTES.md`, `README.md`, `docs/MATLAB_SWAP_GUIDE.md` |

### Major Features

1. **Session Tracking**: State machine (idle/working/break/procrastinating) with event logging, aggregate computation (net focus time, focus ratio, interruptions, longest focus block)
2. **ML Predictions**: Tiered fallback (linear regression → EMA → global averages). Predicts time-to-burnout, optimal session length, break insertion points
3. **Dashboard**: 11 metric cards + 6 charts on one page. Sections: Overview, Time Breakdown, Behavioral Timing, Category Analysis. Filterable by category, task, date range
4. **Animated Buddy**: MapleStory-inspired pixel sprite (48x64 canvas), 8 animation states, walks/blinks/jumps on desktop. Always-on-top transparent overlay
5. **Speech Bubble Menu**: Context-sensitive menus (idle/working/break/procrastinating) - the PRIMARY interaction point
6. **Buddy-Driven UI**: Main window stays hidden. All actions triggered through the buddy's speech bubble. Dashboard/Settings open on demand
7. **Break Research**: 5 evidence-based break strategies (Pomodoro, DeskTime 52/17, Ultradian, ART, Cognitive Fatigue)
8. **Sound Effects**: Procedurally generated WAV files (chimes, pops, punches)
9. **System Tray**: Minimize-to-tray, session persists in background

### Changes Made Today (Redesign Phase)

- **Sprite Generator** (`sprite_generator.py`): Complete rewrite - 48x64 canvas, layered drawing (hair_back → body → head → hair_front), MapleStory-authentic outlines, 3-tone hair, 4 eye states
- **Buddy Widget** (`buddy_widget.py`): Complete rewrite - speech bubble menu with QPainterPath drawing, context-sensitive menus, 8 action signals, drag-vs-click detection
- **Dashboard** (`dashboard_widget.py`): Complete rewrite - MetricCard with accent color bars, SectionHeader, ChartFrame, metrics + charts on same page in logical sections
- **Main Window** (`main_window.py`): Updated to buddy-driven - starts hidden, buddy signals wired to all actions, `_sync_buddy_state()` keeps menus in sync

## How to Run

### Prerequisites

- Python 3.10+
- pip

### Setup

```bash
cd BurnoutTracker
pip install -r requirements.txt
```

### Run the App

```bash
python main.py
```

The animated buddy will appear on your desktop. Click it to see the speech bubble menu with options like "Begin Working", "Dashboard", and "Settings".

### Run Tests

```bash
python -m pytest tests/ -v
```

All 35 tests should pass.

### Seed Sample Data (Optional)

```bash
python scripts/seed_data.py
```

Generates 30 fake sessions across 4 categories and 13 tasks for dashboard testing.
